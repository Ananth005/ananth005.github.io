{"version":3,"file":"TooltipFloating.mjs","names":["Flexbox","Hotkey","arrow"],"sources":["../../src/Tooltip/TooltipFloating.tsx"],"sourcesContent":["'use client';\n\nimport type { FloatingContext, Placement } from '@floating-ui/react';\nimport { FloatingArrow } from '@floating-ui/react';\nimport { useDebounce } from 'ahooks';\nimport type { CSSProperties, ReactNode, RefObject } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { Flexbox } from '@/Flex';\nimport Hotkey from '@/Hotkey';\nimport { AnimatePresence, LazyMotion, m } from '@/motion';\n\nimport { useStyles } from './style';\nimport type { TooltipProps } from './type';\n\ntype TooltipFloatingProps = {\n  arrow?: boolean;\n  arrowRef?: RefObject<SVGSVGElement | null>;\n\n  className?: TooltipProps['className'];\n  classNames?: TooltipProps['classNames'];\n  context?: FloatingContext;\n\n  floatingProps?: Record<string, any>;\n  floatingStyles: CSSProperties;\n\n  hotkey?: TooltipProps['hotkey'];\n  hotkeyProps?: TooltipProps['hotkeyProps'];\n\n  open: boolean;\n  placement?: Placement;\n\n  setFloating: (node: HTMLElement | null) => void;\n  styles?: TooltipProps['styles'];\n  title?: ReactNode;\n  zIndex?: TooltipProps['zIndex'];\n};\n\nconst TooltipFloating = ({\n  open,\n  title,\n  placement,\n  floatingStyles,\n  setFloating,\n  floatingProps,\n  arrow,\n  arrowRef,\n  context,\n  hotkey,\n  hotkeyProps,\n\n  className,\n  classNames,\n  styles: styleProps,\n  zIndex,\n}: TooltipFloatingProps) => {\n  const { styles, cx } = useStyles();\n\n  const transformOrigin = useMemo(() => {\n    const basePlacement = String(placement || 'top').split('-')[0];\n    switch (basePlacement) {\n      case 'top': {\n        return 'bottom center';\n      }\n      case 'bottom': {\n        return 'top center';\n      }\n      case 'left': {\n        return 'center right';\n      }\n      case 'right': {\n        return 'center left';\n      }\n      default: {\n        return 'center';\n      }\n    }\n  }, [placement]);\n\n  const hasTransform = useDebounce(Boolean(floatingStyles?.transform), {\n    leading: false,\n    wait: 16,\n  });\n  return (\n    <LazyMotion>\n      <AnimatePresence>\n        {open && title && (\n          <div\n            className={cx(\n              styles.tooltip,\n              hasTransform && styles.tooltipLayout,\n              classNames?.container,\n              classNames?.root,\n              className,\n            )}\n            key=\"tooltip\"\n            ref={setFloating as any}\n            role=\"tooltip\"\n            style={\n              styleProps?.root\n                ? {\n                    ...floatingStyles,\n                    zIndex,\n                    ...styleProps.container,\n                    ...styleProps.root,\n                  }\n                : {\n                    ...floatingStyles,\n                    zIndex,\n                    ...styleProps?.container,\n                  }\n            }\n            {...floatingProps}\n          >\n            <m.div\n              animate={{ opacity: 1, scale: 1 }}\n              exit={{ opacity: 0, scale: 0.98 }}\n              initial={{ opacity: 0, scale: 0.96 }}\n              style={{ transformOrigin }}\n              transition={{ duration: 0.12, ease: [0.4, 0, 0.2, 1] }}\n            >\n              <div className={cx(styles.content, classNames?.content)} style={styleProps?.content}>\n                {hotkey ? (\n                  <Flexbox align={'center'} gap={8} horizontal justify={'space-between'}>\n                    <span>{title}</span>\n                    <Hotkey inverseTheme keys={hotkey} {...hotkeyProps} />\n                  </Flexbox>\n                ) : (\n                  title\n                )}\n              </div>\n              {arrow && context && (\n                <FloatingArrow\n                  className={cx(styles.arrow, classNames?.arrow)}\n                  context={context}\n                  height={6}\n                  ref={arrowRef as any}\n                  style={styleProps?.arrow}\n                  width={12}\n                />\n              )}\n            </m.div>\n          </div>\n        )}\n      </AnimatePresence>\n    </LazyMotion>\n  );\n};\n\nexport default TooltipFloating;\n"],"mappings":";;;;;;;;;;;;;AAsCA,MAAM,mBAAmB,EACvB,MACA,OACA,WACA,gBACA,aACA,eACA,gBACA,UACA,SACA,QACA,aAEA,WACA,YACA,QAAQ,YACR,aAC0B;CAC1B,MAAM,EAAE,QAAQ,OAAO,WAAW;CAElC,MAAM,kBAAkB,cAAc;AAEpC,UADsB,OAAO,aAAa,MAAM,CAAC,MAAM,IAAI,CAAC,IAC5D;GACE,KAAK,MACH,QAAO;GAET,KAAK,SACH,QAAO;GAET,KAAK,OACH,QAAO;GAET,KAAK,QACH,QAAO;GAET,QACE,QAAO;;IAGV,CAAC,UAAU,CAAC;CAEf,MAAM,eAAe,YAAY,QAAQ,gBAAgB,UAAU,EAAE;EACnE,SAAS;EACT,MAAM;EACP,CAAC;AACF,QACE,oBAAC,wBACC,oBAAC,6BACE,QAAQ,SACP,oBAAC;EACC,WAAW,GACT,OAAO,SACP,gBAAgB,OAAO,eACvB,YAAY,WACZ,YAAY,MACZ,UACD;EAED,KAAK;EACL,MAAK;EACL,OACE,YAAY,OACR;GACE,GAAG;GACH;GACA,GAAG,WAAW;GACd,GAAG,WAAW;GACf,GACD;GACE,GAAG;GACH;GACA,GAAG,YAAY;GAChB;EAEP,GAAI;YAEJ,qBAAC,EAAE;GACD,SAAS;IAAE,SAAS;IAAG,OAAO;IAAG;GACjC,MAAM;IAAE,SAAS;IAAG,OAAO;IAAM;GACjC,SAAS;IAAE,SAAS;IAAG,OAAO;IAAM;GACpC,OAAO,EAAE,iBAAiB;GAC1B,YAAY;IAAE,UAAU;IAAM,MAAM;KAAC;KAAK;KAAG;KAAK;KAAE;IAAE;cAEtD,oBAAC;IAAI,WAAW,GAAG,OAAO,SAAS,YAAY,QAAQ;IAAE,OAAO,YAAY;cACzE,SACC,qBAACA;KAAQ,OAAO;KAAU,KAAK;KAAG;KAAW,SAAS;gBACpD,oBAAC,oBAAM,QAAa,EACpB,oBAACC;MAAO;MAAa,MAAM;MAAQ,GAAI;OAAe;MAC9C,GAEV;KAEE,EACLC,WAAS,WACR,oBAAC;IACC,WAAW,GAAG,OAAO,OAAO,YAAY,MAAM;IACrC;IACT,QAAQ;IACR,KAAK;IACL,OAAO,YAAY;IACnB,OAAO;KACP;IAEE;IA9CJ,UA+CA,GAEQ,GACP;;AAIjB,8BAAe"}