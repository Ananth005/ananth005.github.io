{"version":3,"file":"Tooltip.mjs","names":["TooltipInGroup: FC<TooltipProps>","item: TooltipGroupItem","arrow","triggerProps: any","TooltipStandalone: FC<TooltipProps>","arrowMiddleware","TooltipFloating","TooltipPortal","Tooltip: FC<TooltipProps>"],"sources":["../../src/Tooltip/Tooltip.tsx"],"sourcesContent":["'use client';\n\nimport {\n  arrow as arrowMiddleware,\n  autoUpdate,\n  flip,\n  offset,\n  shift,\n  useDismiss,\n  useFloating,\n  useFocus,\n  useHover,\n  useInteractions,\n  useRole,\n} from '@floating-ui/react';\nimport {\n  type FC,\n  cloneElement,\n  isValidElement,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { mergeRefs } from 'react-merge-refs';\n\nimport { antdPlacementToFloating } from '@/Tooltip/antdPlacementToFloating';\nimport { composeEventHandlers } from '@/utils/composeEventHandlers';\n\nimport TooltipFloating from './TooltipFloating';\nimport TooltipPortal from './TooltipPortal';\nimport {\n  TooltipGroupApiContext,\n  type TooltipGroupItem,\n  TooltipGroupPropsContext,\n} from './groupContext';\nimport type { TooltipProps } from './type';\n\nconst TooltipInGroup: FC<TooltipProps> = ({\n  ref,\n  hotkey,\n  className,\n  arrow,\n  title,\n  hotkeyProps,\n  children,\n  placement,\n  openDelay,\n  closeDelay,\n  mouseEnterDelay,\n  mouseLeaveDelay,\n  onOpenChange,\n  disabled,\n  classNames,\n  styles: styleProps,\n  zIndex,\n  portalled,\n  getPopupContainer,\n}) => {\n  const group = useContext(TooltipGroupApiContext);\n  const sharedProps = useContext(TooltipGroupPropsContext);\n  const triggerElRef = useRef<HTMLElement | null>(null);\n\n  const mergedClassName = useMemo(() => {\n    if (!sharedProps?.className && !className) return undefined;\n    return [sharedProps?.className, className].filter(Boolean).join(' ');\n  }, [className, sharedProps?.className]);\n\n  const mergedClassNames = useMemo(() => {\n    if (!sharedProps?.classNames && !classNames) return undefined;\n    return { ...sharedProps?.classNames, ...classNames };\n  }, [classNames, sharedProps?.classNames]);\n\n  const mergedStyles = useMemo(() => {\n    if (!sharedProps?.styles && !styleProps) return undefined;\n    return { ...sharedProps?.styles, ...styleProps };\n  }, [sharedProps?.styles, styleProps]);\n\n  const mergedHotkeyProps = useMemo(() => {\n    if (!sharedProps?.hotkeyProps && !hotkeyProps) return undefined;\n    return { ...sharedProps?.hotkeyProps, ...hotkeyProps };\n  }, [hotkeyProps, sharedProps?.hotkeyProps]);\n\n  const mergedOnOpenChange = useMemo(() => {\n    if (!sharedProps?.onOpenChange && !onOpenChange) return undefined;\n    return (open: boolean) => {\n      sharedProps?.onOpenChange?.(open);\n      onOpenChange?.(open);\n    };\n  }, [onOpenChange, sharedProps?.onOpenChange]);\n\n  const item: TooltipGroupItem = useMemo(\n    () => ({\n      arrow: arrow ?? sharedProps?.arrow ?? false,\n      className: mergedClassName,\n      classNames: mergedClassNames,\n      closeDelay: closeDelay ?? sharedProps?.closeDelay,\n      disabled: disabled ?? sharedProps?.disabled,\n      getPopupContainer: getPopupContainer ?? sharedProps?.getPopupContainer,\n      hotkey: hotkey ?? sharedProps?.hotkey,\n      hotkeyProps: mergedHotkeyProps,\n      mouseEnterDelay: mouseEnterDelay ?? sharedProps?.mouseEnterDelay,\n      mouseLeaveDelay: mouseLeaveDelay ?? sharedProps?.mouseLeaveDelay,\n      onOpenChange: mergedOnOpenChange,\n      openDelay: openDelay ?? sharedProps?.openDelay,\n      placement: placement ?? sharedProps?.placement ?? 'top',\n      portalled: portalled ?? sharedProps?.portalled,\n      styles: mergedStyles,\n      title,\n      zIndex: zIndex ?? sharedProps?.zIndex,\n    }),\n    [\n      arrow,\n      closeDelay,\n      disabled,\n      getPopupContainer,\n      hotkey,\n      mergedClassName,\n      mergedClassNames,\n      mergedHotkeyProps,\n      mergedOnOpenChange,\n      mergedStyles,\n      mouseEnterDelay,\n      mouseLeaveDelay,\n      openDelay,\n      placement,\n      portalled,\n      sharedProps?.arrow,\n      sharedProps?.closeDelay,\n      sharedProps?.disabled,\n      sharedProps?.getPopupContainer,\n      sharedProps?.hotkey,\n      sharedProps?.mouseEnterDelay,\n      sharedProps?.mouseLeaveDelay,\n      sharedProps?.openDelay,\n      sharedProps?.placement,\n      sharedProps?.portalled,\n      sharedProps?.zIndex,\n      title,\n      zIndex,\n    ],\n  );\n\n  const trigger = useMemo(() => {\n    if (!isValidElement(children)) return <span>{children}</span>;\n\n    const needsWrapper =\n      typeof children.type === 'string' && Boolean((children.props as any)?.disabled);\n\n    if (needsWrapper) return <span style={{ display: 'inline-flex' }}>{children}</span>;\n\n    return children;\n  }, [children]);\n\n  const referenceNode = useMemo(() => {\n    if (!isValidElement(trigger)) return trigger;\n\n    const originalRef = (trigger as any).ref;\n    const triggerProps: any = trigger.props || {};\n\n    const setTriggerEl = (node: any) => {\n      triggerElRef.current = node instanceof HTMLElement ? node : null;\n    };\n\n    return cloneElement(trigger as any, {\n      ...triggerProps,\n      onBlur: composeEventHandlers(triggerProps.onBlur, (e: any) => {\n        group?.closeFromTrigger(e.currentTarget as HTMLElement, item);\n      }),\n      onFocus: composeEventHandlers(triggerProps.onFocus, (e: any) => {\n        group?.openFromTrigger(e.currentTarget as HTMLElement, item);\n      }),\n      onKeyDown: composeEventHandlers(triggerProps.onKeyDown, (e: any) => {\n        if (e?.key === 'Escape') group?.closeImmediately();\n      }),\n      onPointerEnter: composeEventHandlers(triggerProps.onPointerEnter, (e: any) => {\n        group?.openFromTrigger(e.currentTarget as HTMLElement, item);\n      }),\n      onPointerLeave: composeEventHandlers(triggerProps.onPointerLeave, (e: any) => {\n        group?.closeFromTrigger(e.currentTarget as HTMLElement, item);\n      }),\n      ref: mergeRefs([originalRef, setTriggerEl, ref]),\n    });\n  }, [group, item, ref, trigger]);\n\n  useEffect(() => {\n    return () => {\n      if (!group) return;\n      const el = triggerElRef.current;\n      if (el && group.isActiveTrigger(el)) group.closeImmediately();\n    };\n  }, [group]);\n\n  return referenceNode as any;\n};\n\nTooltipInGroup.displayName = 'TooltipInGroup';\n\nconst TooltipStandalone: FC<TooltipProps> = ({\n  ref,\n  hotkey,\n  className,\n  arrow = false,\n  title,\n  hotkeyProps,\n  children,\n  placement = 'top',\n  openDelay,\n  closeDelay,\n  mouseEnterDelay,\n  mouseLeaveDelay,\n  open,\n  defaultOpen,\n  onOpenChange,\n  disabled,\n  classNames,\n  styles: styleProps,\n  zIndex,\n  portalled = true,\n  getPopupContainer,\n}) => {\n  const arrowRef = useRef<SVGSVGElement | null>(null);\n  const [uncontrolledOpen, setUncontrolledOpen] = useState(Boolean(defaultOpen));\n\n  const mergedOpen = open ?? uncontrolledOpen;\n  const setOpen = (next: boolean) => {\n    if (open === undefined) setUncontrolledOpen(next);\n    onOpenChange?.(next);\n  };\n\n  const floatingPlacement = useMemo(() => antdPlacementToFloating(placement), [placement]);\n\n  const middleware = useMemo(() => {\n    const base = [offset(8), flip(), shift({ padding: 8 })];\n    if (arrow) base.push(arrowMiddleware({ element: arrowRef }));\n    return base;\n  }, [arrow]);\n\n  const { context, floatingStyles, refs } = useFloating({\n    middleware,\n    onOpenChange: setOpen,\n    open: disabled ? false : mergedOpen,\n    placement: floatingPlacement,\n    whileElementsMounted: autoUpdate,\n  });\n\n  const resolvedDelay = useMemo(\n    () => ({\n      close: closeDelay ?? (mouseLeaveDelay !== undefined ? mouseLeaveDelay * 1000 : 100),\n      open: openDelay ?? (mouseEnterDelay !== undefined ? mouseEnterDelay * 1000 : 400),\n    }),\n    [closeDelay, mouseEnterDelay, mouseLeaveDelay, openDelay],\n  );\n\n  const hover = useHover(context, {\n    delay: resolvedDelay,\n    enabled: !disabled,\n    move: false,\n  });\n  const focus = useFocus(context, { enabled: !disabled });\n  const dismiss = useDismiss(context, { enabled: !disabled });\n  const role = useRole(context, { role: 'tooltip' });\n\n  const { getFloatingProps, getReferenceProps } = useInteractions([hover, focus, dismiss, role]);\n\n  const trigger = useMemo(() => {\n    if (!isValidElement(children)) return <span>{children}</span>;\n\n    const needsWrapper =\n      typeof children.type === 'string' && Boolean((children.props as any)?.disabled);\n\n    if (needsWrapper) return <span style={{ display: 'inline-flex' }}>{children}</span>;\n\n    return children;\n  }, [children]);\n\n  const referenceNode = useMemo(() => {\n    if (!isValidElement(trigger)) return trigger;\n\n    const originalRef = (trigger as any).ref;\n\n    return cloneElement(\n      trigger as any,\n      getReferenceProps({\n        ...(trigger.props as any),\n        ref: mergeRefs([originalRef, refs.setReference, ref]),\n      }),\n    );\n  }, [getReferenceProps, ref, refs.setReference, trigger]);\n\n  const portalRoot =\n    getPopupContainer && refs.reference.current\n      ? getPopupContainer(refs.reference.current as any)\n      : undefined;\n\n  const floatingNode = (\n    <TooltipFloating\n      arrow={arrow}\n      arrowRef={arrowRef}\n      className={className}\n      classNames={classNames}\n      context={context}\n      floatingProps={getFloatingProps()}\n      floatingStyles={floatingStyles}\n      hotkey={hotkey}\n      hotkeyProps={hotkeyProps}\n      open={mergedOpen}\n      placement={floatingPlacement}\n      setFloating={refs.setFloating}\n      styles={styleProps}\n      title={title}\n      zIndex={zIndex}\n    />\n  );\n\n  return (\n    <>\n      {referenceNode}\n      {!disabled &&\n        title &&\n        (portalled ? (\n          <TooltipPortal root={portalRoot}>{floatingNode}</TooltipPortal>\n        ) : (\n          floatingNode\n        ))}\n    </>\n  );\n};\n\nexport const Tooltip: FC<TooltipProps> = (props) => {\n  const group = useContext(TooltipGroupApiContext);\n\n  // Group mode is intentionally hover/focus driven; keep standalone behavior for controlled cases.\n  const canUseGroup = Boolean(group) && props.open === undefined && props.defaultOpen === undefined;\n\n  return canUseGroup ? <TooltipInGroup {...props} /> : <TooltipStandalone {...props} />;\n};\n\nexport default Tooltip;\n"],"mappings":"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"}