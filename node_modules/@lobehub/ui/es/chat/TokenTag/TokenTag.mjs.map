{"version":3,"file":"TokenTag.mjs","names":["TokenTag: FC<TokenTagProps>","type: 'normal' | 'low' | 'overload'","Button","cx","FluentEmoji"],"sources":["../../../src/chat/TokenTag/TokenTag.tsx"],"sourcesContent":["'use client';\n\nimport { useResponsive } from 'antd-style';\nimport { cva } from 'class-variance-authority';\nimport numeral from 'numeral';\nimport { type FC, useMemo } from 'react';\n\nimport Button from '@/Button';\nimport FluentEmoji from '@/FluentEmoji';\n\nimport { useStyles } from './style';\nimport type { TokenTagProps } from './type';\n\nconst format = (number: number) => numeral(number).format('0,0');\n\nconst TokenTag: FC<TokenTagProps> = ({\n  className,\n  shape = 'round',\n  mode = 'remained',\n  maxValue,\n  value,\n  text,\n  unoptimized,\n  hideText,\n  ref,\n  ...rest\n}) => {\n  const { mobile } = useResponsive();\n  const valueLeft = maxValue - value;\n  const percent = valueLeft / maxValue;\n  const showText = !hideText && !mobile;\n\n  const data = useMemo(() => {\n    let type: 'normal' | 'low' | 'overload';\n    let emoji;\n\n    if (percent > 0.3) {\n      type = 'normal';\n      emoji = 'ðŸ˜€';\n    } else if (percent > 0) {\n      type = 'low';\n      emoji = 'ðŸ˜…';\n    } else {\n      type = 'overload';\n      emoji = 'ðŸ¤¯';\n    }\n    return {\n      emoji,\n      type,\n    };\n  }, [percent]);\n\n  const { styles, cx } = useStyles();\n\n  const variants = useMemo(\n    () =>\n      cva(styles.root, {\n        defaultVariants: {\n          type: 'normal',\n        },\n        /* eslint-disable sort-keys-fix/sort-keys-fix */\n        variants: {\n          type: {\n            normal: styles.normal,\n            low: styles.low,\n            overload: styles.overload,\n          },\n        },\n        /* eslint-enable sort-keys-fix/sort-keys-fix */\n      }),\n    [styles],\n  );\n\n  return (\n    <Button\n      className={cx(variants({ type: data.type }), className)}\n      ref={ref}\n      shape={shape}\n      variant={'filled'}\n      {...rest}\n    >\n      <FluentEmoji emoji={data.emoji} size={18} unoptimized={unoptimized} />\n      {valueLeft > 0\n        ? [\n            showText\n              ? mode === 'remained'\n                ? text?.remained || 'Remained'\n                : text?.used || 'Used'\n              : '',\n            mode === 'remained' ? format(valueLeft) : format(value),\n          ].join(' ')\n        : text?.overload || 'Overload'}\n    </Button>\n  );\n};\n\nTokenTag.displayName = 'TokenTag';\n\nexport default TokenTag;\n"],"mappings":";;;;;;;;;;;;AAaA,MAAM,UAAU,WAAmB,QAAQ,OAAO,CAAC,OAAO,MAAM;AAEhE,MAAMA,YAA+B,EACnC,WACA,QAAQ,SACR,OAAO,YACP,UACA,OACA,MACA,aACA,UACA,KACA,GAAG,WACC;CACJ,MAAM,EAAE,WAAW,eAAe;CAClC,MAAM,YAAY,WAAW;CAC7B,MAAM,UAAU,YAAY;CAC5B,MAAM,WAAW,CAAC,YAAY,CAAC;CAE/B,MAAM,OAAO,cAAc;EACzB,IAAIC;EACJ,IAAI;AAEJ,MAAI,UAAU,IAAK;AACjB,UAAO;AACP,WAAQ;aACC,UAAU,GAAG;AACtB,UAAO;AACP,WAAQ;SACH;AACL,UAAO;AACP,WAAQ;;AAEV,SAAO;GACL;GACA;GACD;IACA,CAAC,QAAQ,CAAC;CAEb,MAAM,EAAE,QAAQ,aAAO,WAAW;AAqBlC,QACE,qBAACC;EACC,WAAWC,KArBE,cAEb,IAAI,OAAO,MAAM;GACf,iBAAiB,EACf,MAAM,UACP;GAED,UAAU,EACR,MAAM;IACJ,QAAQ,OAAO;IACf,KAAK,OAAO;IACZ,UAAU,OAAO;IAClB,EACF;GAEF,CAAC,EACJ,CAAC,OAAO,CACT,CAI0B,EAAE,MAAM,KAAK,MAAM,CAAC,EAAE,UAAU;EAClD;EACE;EACP,SAAS;EACT,GAAI;aAEJ,oBAACC;GAAY,OAAO,KAAK;GAAO,MAAM;GAAiB;IAAe,EACrE,YAAY,IACT,CACE,WACI,SAAS,aACP,MAAM,YAAY,aAClB,MAAM,QAAQ,SAChB,IACJ,SAAS,aAAa,OAAO,UAAU,GAAG,OAAO,MAAM,CACxD,CAAC,KAAK,IAAI,GACX,MAAM,YAAY;GACf;;AAIb,SAAS,cAAc;AAEvB,uBAAe"}